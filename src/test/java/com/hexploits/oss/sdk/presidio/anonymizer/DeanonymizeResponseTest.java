package com.hexploits.oss.sdk.presidio.anonymizer;

import org.junit.jupiter.api.Test;
import java.util.List;
import static org.junit.jupiter.api.Assertions.*;

class DeanonymizeResponseTest {

    @Test
    void testDeanonymizeResponseCreation() {
        OperatorResult operatorResult1 = new OperatorResult("decrypt", "LOCATION", 40, 46, "London");
        OperatorResult operatorResult2 = new OperatorResult("decrypt", "PERSON", 11, 28, "John Doe");
        List<OperatorResult> items = List.of(operatorResult1, operatorResult2);

        DeanonymizeResponse response = new DeanonymizeResponse("Sample text", items);

        assertNotNull(response);
        assertEquals("Sample text", response.text());
        assertEquals(2, response.items().size());
        assertEquals(operatorResult1, response.items().get(0));
        assertEquals(operatorResult2, response.items().get(1));
    }

    @Test
    void testDeanonymizeResponseWithEmptyItems() {
        List<OperatorResult> items = List.of();

        DeanonymizeResponse response = new DeanonymizeResponse("Sample text", items);

        assertNotNull(response);
        assertEquals("Sample text", response.text());
        assertTrue(response.items().isEmpty());
    }

    @Test
    void testDeanonymizeResponseWithNullItems() {
        DeanonymizeResponse response = new DeanonymizeResponse("Sample text", null);

        assertNotNull(response);
        assertEquals("Sample text", response.text());
        assertNull(response.items());
    }

    @Test
    void testDeanonymizeResponseEquality() {
        OperatorResult operatorResult1 = new OperatorResult("decrypt", "LOCATION", 40, 46, "London");
        List<OperatorResult> items = List.of(operatorResult1);

        DeanonymizeResponse response1 = new DeanonymizeResponse("Sample text", items);
        DeanonymizeResponse response2 = new DeanonymizeResponse("Sample text", items);

        assertEquals(response1, response2);
        assertEquals(response1.hashCode(), response2.hashCode());
    }

    @Test
    void testDeanonymizeResponseInequality() {
        OperatorResult operatorResult1 = new OperatorResult("decrypt", "LOCATION", 40, 46, "London");
        List<OperatorResult> items1 = List.of(operatorResult1);
        List<OperatorResult> items2 = List.of();

        DeanonymizeResponse response1 = new DeanonymizeResponse("Sample text", items1);
        DeanonymizeResponse response2 = new DeanonymizeResponse("Different text", items2);

        assertNotEquals(response1, response2);
    }
}